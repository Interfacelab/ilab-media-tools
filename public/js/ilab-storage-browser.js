!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=335)}({335:function(e,t,n){e.exports=n(336)},336:function(e,t){window.ilabStorageBrowser=function(e,t,n){var o=e("div.ilab-storage-browser"),i=e("div.ilab-storage-browser > div.table-container").find("table"),r=o.find("div.ilab-storage-browser-header"),a=!1,l=[],s=[],d=e("#ilab-storage-progress-modal"),c=d.find("div.ilab-storage-progress-label"),u=d.find("#ilab-storage-progress"),f=o.find(".button-upload"),p=o.find(".button-create-folder"),h=o.find(".button-import"),b=o.find(".ilab-storage-browser-actions > .buttons > .button-delete"),m=[],g=0,y=[],v=0,w=e("#ilab-upload-modal"),k=e("div.ilab-upload-items-container"),x=0,C=0,D=null;if("undefined"!=typeof ilabMediaUploader&&"function"==typeof ilabMediaUploader&&t){var _=["image/jpg","image/jpeg","image/png"],U=!1,P=!1,S=!1,j=!1,N=1;"undefined"!=typeof mediaCloudDirectUploadSettings&&(_=mediaCloudDirectUploadSettings.allowedMimes,U=mediaCloudDirectUploadSettings.imgixEnabled,P=mediaCloudDirectUploadSettings.videoEnabled,S=mediaCloudDirectUploadSettings.docsEnabled,j=mediaCloudDirectUploadSettings.extrasEnabled,mediaCloudDirectUploadSettings.maxUploads>0&&(N=mediaCloudDirectUploadSettings.maxUploads)),(D=new ilabMediaUploader(e,{clickToUpload:!1,insertMode:!1,maxUploads:N,imgixEnabled:U,videoEnabled:P,docsEnabled:S,extrasEnabled:j,insertButton:e("#ilab-insert-button"),uploadTarget:e("#wpbody"),attachmentContainer:e("#ilab-attachment-info"),cellContainer:e("#ilab-upload-items-container"),uploadItemTemplate:wp.template("ilab-upload-cell"),attachmentTemplate:wp.template("ilab-attachment-info"),allowedMimes:_})).setUploadDirectory(browserCurrentPath),console.log(D)}else console.log("no uploader");e(document).on("ilab.upload-started",function(e){console.log("upload started"),x++,clearTimeout(C),1==x&&(k.empty(),w.removeClass("hidden"))}),e(document).on("ilab.upload-finished",function(e){--x<=0&&(C=setTimeout(function(){I(browserCurrentPath,!1,function(){w.addClass("hidden")})},2e3))}),f.on("click",function(e){return e.preventDefault(),null!=D&&D.openUpload(),!1}),p.on("click",function(t){t.preventDefault();var n=prompt("New folder name");if(null!=n){var o={action:"ilab_browser_create_directory",key:browserCurrentPath,nonce:browserNonce,directory:n};e.post(ajaxurl,o,function(e){"ok"==e.status&&B(e)})}return!1}),b.on("click",function(e){return e.preventDefault(),n&&l.length>0&&confirm("Are you sure you want to delete these items?")&&(g=0,m=[],l.forEach(function(e){var t=e.data("key");m.push(t)}),c.text(""),u.css({width:"0%"}),d.removeClass("hidden"),E()),!1}),h.on("click",function(t){if(t.preventDefault(),l.length>0&&confirm("This action will import these items into your media library.  It will not process any media files that look like thumbnails.")){var n=[];l.forEach(function(e){n.push(e.data("key"))});var o={action:"ilab_browser_file_list",key:browserCurrentPath,nonce:browserNonce,keys:n};c.text("Building file list ..."),u.css({width:"0%"}),d.removeClass("hidden"),e.post(ajaxurl,o,function(e){"ok"==e.status&&e.files.length>0&&(y=e.files,v=0,O())})}return!1});var O=function t(){var n=y[v];c.text("Importing "+(v+1)+" of "+y.length+" '"+n+"' ..."),u.css({width:v/y.length*100+"%"});var o={action:"ilab_browser_import_file",key:n,nonce:browserNonce};e.post(ajaxurl,o,function(e){e.hasOwnProperty("nextNonce")&&(browserNonce=e.nextNonce),"error"==e.status?(u.css({width:"100%"}),d.addClass("hidden"),setTimeout(function(){alert("There was an error attempting to import items.\n\nIf you are using Google Cloud Storage, this is typically a permissions error.  You must set the service account you are using as the owner of the objects.")},500)):++v>=y.length?(u.css({width:"100%"}),d.addClass("hidden")):t()})},E=function t(){if(n){var o=m[g];c.text("Deleting "+(g+1)+" of "+m.length+" '"+o+"' ..."),u.css({width:g/m.length*100+"%"});var i={action:"ilab_browser_delete",key:browserCurrentPath,nonce:browserNonce,keys:[o]};e.post(ajaxurl,i,function(e){"ok"==e.status?B(e):e.hasOwnProperty("nextNonce")&&(browserNonce=e.nextNonce),++g>=m.length?(u.css({width:"100%"}),d.addClass("hidden")):t()})}},T=function(){0==l.length?(h.addClass("disabled"),b.addClass("disabled")):(h.removeClass("disabled"),b.removeClass("disabled"))},M=function(){s=[],l=[],i.find("tr[data-key]").each(function(){var t=e(this),n=null;s.push(t),t.find("td > input[type=checkbox]").each(function(){n=this,e(this).on("change",function(){if(this.checked)l.push(t);else{var e=l.indexOf(t);e>-1&&l.splice(e,1)}T()})}),"dir"==e(this).data("file-type")?e(this).on("click",function(n){if(!e(n.target).is("input"))return n.preventDefault(),t.find("img.loader").css({display:"block"}),t.find("td > span").css({display:"none"}),I(e(this).data("key"),!0),!1}):(t.find(".ilab-browser-action-delete").on("click",function(e){return e.preventDefault(),confirm("Are you sure you want to delete this item?")&&(g=0,m=[t.data("key")],c.text(""),u.css({width:"0%"}),d.removeClass("hidden"),E()),!1}),e(this).on("click",function(o){if(!e(o.target).is("input")&&!e(o.target).is("a")){if(o.preventDefault(),n.checked=!n.checked,n.checked)l.push(t);else{var i=l.indexOf(t);i>-1&&l.splice(i,1)}return T(),!1}}))}),i.find("th > input[type=checkbox]").on("change",function(){l=[];var e=this;s.forEach(function(t){t.find("td > input[type=checkbox]")[0].checked=e.checked,e.checked&&l.push(t)}),T()}),T()},B=function(t){var n=e(t.table),o=e(t.header);o.insertBefore(r),n.insertBefore(i),r.remove(),i.remove(),i=n,r=o,M(),A(),t.hasOwnProperty("nextNonce")&&(browserNonce=t.nextNonce)},I=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a=!0;var i={action:"ilab_browser_select_directory",nonce:browserNonce,key:t};e.post(ajaxurl,i,function(e){if("ok"==e.status){if(B(e),n){browserCurrentPath=t,null!=D&&D.setUploadDirectory(t);var i={path:browserCurrentPath};history.pushState(i,"",browserBaseURL+"&path="+t)}null!=o&&o()}})},A=function(){o.find('a[data-file-type="dir"]').on("click",function(t){return t.preventDefault(),I(e(this).data("key"),!0),!1})};M(),A(),window.addEventListener("popstate",function(e){if(a){var t=null!=e.state&&e.state.hasOwnProperty("path")?e.state.path:"";return e.preventDefault(),I(t,!1),!1}})}}});